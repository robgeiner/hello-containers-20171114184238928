module "app-sun_ms_location-ingestor" {
  source = "git@github.com:TheWeatherCompany/tf-module-app_behind_elb.git?ref=0.2.20"
  app-name = "sun-ms-location-ingestor"
  environment = "${var.environment}"
  chef_repo = "platform"
  chef_role = "sun-ms-location-ingestor"
  region = "${var.region}"
  billing-tag = "SUN"
  node-subnet = "${data.terraform_remote_state.sun-managed-qa-us-east-1.private_2_ids}"
  node-zone =  "${data.terraform_remote_state.sun-managed-qa-us-east-1.private_2_zones}"
  elb-subnet = "${data.terraform_remote_state.sun-managed-qa-us-east-1.private_2_ids}"
  zone_id = "${var.zone_id}"
  ssh-key-name = "${var.ssh_key_name}"
  validation_client_name = "${var.validation_client_name}"
  validation_key_path = "${var.validation_key_path}"
  security_groups = "${data.terraform_remote_state.sun-managed-qa-us-east-1.basic_access_sg},${data.terraform_remote_state.sun-managed-qa-us-east-1.internal_sg}"
  vpc = "${data.terraform_remote_state.sun-managed-qa-us-east-1.vpc_id}"
  bastion_host = "${data.terraform_remote_state.sun-managed-qa-us-east-1.bastion_ip}"
  instance_type = "c4.2xlarge"
  private_key = "${var.private_key}"
  bastion_private_key = "${var.bastion_private_key}"
  healthcheck = "HTTP:8080/heartbeat"
}
